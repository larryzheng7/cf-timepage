
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>cf-timepage – Digital Clock</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { color-scheme: dark; }
    /* ====== Layout ====== */
    html, body {
      height: 100%;
      margin: 0;
      background: #0b0b0b;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 2rem;
      position: relative;
      overflow: hidden;
    }

    /* ====== Scanlines overlay (subtle CRT feel) ====== */
    .scanlines {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.04) 0,
        rgba(255,255,255,0.04) 1px,
        transparent 3px,
        transparent 4px
      );
      mix-blend-mode: overlay;
    }

    /* ====== Digital clock container ====== */
    .clock {
      display: grid;
      grid-template-columns: auto 2rem auto;
      align-items: center;
      gap: 2rem;
    }
    /* Responsive scaling */
    @media (min-width: 1200px) {
      .clock { transform: scale(1.2); }
    }
    @media (max-width: 640px) {
      .clock { transform: scale(0.8); }
    }

    /* ====== Seven-segment digit ====== */
    .digit {
      position: relative;
      width: 22rem;   /* overall digit width */
      height: 36rem;  /* overall digit height */
    }

    /* Segment base style */
    .seg {
      position: absolute;
      background: #303336;               /* off color */
      border-radius: 0.6rem;
      filter: drop-shadow(0 0 0.8rem rgba(180,180,180,0.1));
      transition: background 0.2s, box-shadow 0.2s;
    }
    /* "On" state with glow */
    .seg.on {
      background: #9aa0a6;
      box-shadow:
        0 0 1.2rem rgba(154,160,166,0.30),
        0 0 3.0rem rgba(154,160,166,0.20);
    }

    /* Segment geometry: a (top), b (top-right), c (bottom-right), d (bottom),
       e (bottom-left), f (top-left), g (middle) */
    .seg.a { top: 0; left: 3.2rem; right: 3.2rem; height: 2.0rem; }
    .seg.b { top: 2.4rem; right: 1.2rem; width: 2.0rem; height: 13.0rem; }
    .seg.c { bottom: 2.4rem; right: 1.2rem; width: 2.0rem; height: 13.0rem; }
    .seg.d { bottom: 0; left: 3.2rem; right: 3.2rem; height: 2.0rem; }
    .seg.e { bottom: 2.4rem; left: 1.2rem; width: 2.0rem; height: 13.0rem; }
    .seg.f { top: 2.4rem; left: 1.2rem; width: 2.0rem; height: 13.0rem; }
    .seg.g { top: 17.0rem; left: 3.2rem; right: 3.2rem; height: 2.0rem; }

    /* Colon between HH and MM (blinking) */
    .colon {
      display: grid;
      gap: 2.2rem;
      align-self: center;
    }
    .dot {
      width: 2.0rem;
      height: 2.0rem;
      background: #303336;
      border-radius: 50%;
    }
    .dot.on {
      background: #9aa0a6;
      box-shadow:
        0 0 0.8rem rgba(154,160,166,0.30),
        0 0 2.0rem rgba(154,160,166,0.20);
    }

    /* Date + weekday line (digital feel) */
    .line {
      margin-top: 2.5rem;
      text-align: center;
      letter-spacing: 0.4rem;
      color: #808488;
      text-shadow:
        0 0 0.8rem rgba(180,180,180,0.18),
        0 0 2.0rem rgba(180,180,180,0.12);
      font-weight: 600;
    }
    .date { font-size: 3.0rem; }
    .dow  { font-size: 3.2rem; margin-top: 1.0rem; }

    /* Title (optional) */
    h1 {
      position: absolute;
      top: 2rem;
      left: 2rem;
      margin: 0;
      color: #d3d6da;
      font-size: 3.0rem;
      font-weight: 700;
      text-shadow: 0 0 0.6rem rgba(211,214,218,0.25);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Current Time</h1>

    <div class="clock" aria-label="Digital clock">
      <!-- HH -->
      <div class="digit" id="h1">
        <div class="seg a"></div><div class="seg b"></div><div class="seg c"></div>
        <div class="seg d"></div><div class="seg e"></div><div class="seg f"></div><div class="seg g"></div>
      </div>
      <div class="digit" id="h2">
        <div class="seg a"></div><div class="seg b"></div><div class="seg c"></div>
        <div class="seg d"></div><div class="seg e"></div><div class="seg f"></div><div class="seg g"></div>
      </div>

      <!-- Colon -->
      <div class="colon" aria-hidden="true">
        <div class="dot" id="dot1"></div>
        <div class="dot" id="dot2"></div>
      </div>

      <!-- MM -->
      <div class="digit" id="m1">
        <div class="seg a"></div><div class="seg b"></div><div class="seg c"></div>
        <div class="seg d"></div><div class="seg e"></div><div class="seg f"></div><div class="seg g"></div>
      </div>
      <div class="digit" id="m2">
        <div class="seg a"></div><div class="seg b"></div><div class="seg c"></div>
        <div class="seg d"></div><div class="seg e"></div><div class="seg f"></div><div class="seg g"></div>
      </div>
    </div>

    <!-- Date + Day -->
    <div class="line date" id="dateLine">YYYY-MM-DD</div>
    <div class="line dow"  id="dowLine">WEEKDAY</div>

    <!-- Overlay -->
    <div class="scanlines"></div>
  </div>

  <script>
    // America/Chicago timezone
    const TZ = 'America/Chicago';

    // Segment map: which segments are ON for each digit 0–9
    // a b c d e f g
    const DIGITS = {
      0: ['a','b','c','d','e','f'],
      1: ['b','c'],
      2: ['a','b','g','e','d'],
      3: ['a','b','g','c','d'],
      4: ['f','g','b','c'],
      5: ['a','f','g','c','d'],
      6: ['a','f','e','d','c','g'],
      7: ['a','b','c'],
      8: ['a','b','c','d','e','f','g'],
      9: ['a','b','c','d','f','g'],
    };

    function setDigit(el, n) {
      const on = new Set(DIGITS[n]);
      el.querySelectorAll('.seg').forEach(seg => {
        const id = [...seg.classList].find(c => c.length === 1); // a..g
        seg.classList.toggle('on', on.has(id));
      });
    }

    function fmtTimeParts(date) {
      const parts = new Intl.DateTimeFormat('en-US', {
        timeZone: TZ,
        hourCycle: 'h12',
        hour: '2-digit',
        minute: '2-digit'
      }).formatToParts(date);
      const get = t => parts.find(p => p.type === t)?.value ?? '';
      return { hour: get('hour'), minute: get('minute') };
    }

    function fmtDateParts(date) {
      const parts = new Intl.DateTimeFormat('en-CA', {
        timeZone: TZ, year: 'numeric', month: '2-digit', day: '2-digit'
      }).formatToParts(date);
      const get = t => parts.find(p => p.type === t)?.value ?? '';
      return { year: get('year'), month: get('month'), day: get('day') };
    }

    function fmtWeekday(date) {
      return new Intl.DateTimeFormat('en-US', {
        timeZone: TZ, weekday: 'long'
      }).format(date).toUpperCase();
    }

    // Blink colon
    let colonOn = true;
    function setColon(on) {
      document.getElementById('dot1').classList.toggle('on', on);
      document.getElementById('dot2').classList.toggle('on', on);
    }

    function render() {
      const now = new Date();
      const { hour, minute } = fmtTimeParts(now);

      // HH: for h12, hour may be '12' at midnight; we keep it as 12-hour format
      const h1 = Number(hour[0]);
      const h2 = Number(hour[1]);
      const m1 = Number(minute[0]);
      const m2 = Number(minute[1]);

      setDigit(document.getElementById('h1'), h1);
      setDigit(document.getElementById('h2'), h2);
      setDigit(document.getElementById('m1'), m1);
      setDigit(document.getElementById('m2'), m2);

      const { year, month, day } = fmtDateParts(now);
      document.getElementById('dateLine').textContent = `${year}-${month}-${day}`;
      document.getElementById('dowLine').textContent  = fmtWeekday(now);

      // Blink colon every render tick
      colonOn = !colonOn;
      setColon(colonOn);
    }

    // Initial paint
    render();
    // Update every second
    setInterval(render, 1000);
    // Repaint when tab becomes visible
    document.addEventListener('visibilitychange', () => { if (!document.hidden) render(); });
  </script>
</body>
</html>

